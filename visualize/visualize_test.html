
<!DOCTYPE html>
<!-- Run this to make it work http-server C:\Users\maxob\Documents\GitHub\zi-space\visualize -->
<html>
<meta charset="utf-8">

<!-- Example based on http://bl.ocks.org/mbostock/3887118 -->
<!-- Tooltip example from http://www.d3noob.org/2013/01/adding-tooltips-to-d3js-graph.html -->

<style>
body {
  font: 11px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

</style>
<body>
<script src="http://d3js.org/d3.v4.min.js"></script>

<script>
var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

function convertX(x) {
  return   width / 200  * ( 100 + parseFloat(x))
}

function convertY(y) {
  return height / 200 * (100 + parseFloat(y)) + margin.top
}

// add the graph canvas to the body of the webpage
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
var g= svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("rect")
    .attr("width", width)
    .attr("height", height)
    .style("fill", "none")
    .style("pointer-events", "all")
    .call(d3.zoom()
        .scaleExtent([1 / 2, 8])
        .on("zoom", zoomed));

// load data
d3.csv("tsne.csv", function(data) {

  // don't want dots overlapping axis, so add in buffer to data domain

  var elem = g.selectAll("g").data(data)

  var elemEnter = elem.enter()
      .append("g")
      .attr("transform", function(d){return "translate("+convertX(d.x)+","+convertY(d.y)+")"})

  var size = 4
  var circle = elemEnter.append("circle")
      .attr("r", function(d){return size})
      .attr("stroke","black")
      .attr("fill","white")
  elemEnter.append("text")
      .style("font-size",size+"px")
      .attr("dx", function(d){return -size/2})
      .attr("dy", function(d){return size/2})
      .text(function(d){return d.character})
});

function zoomed() {
  console.log("zoomed!")
  g.attr("transform", d3.event.transform);
}



</script>
</body>
</html>
